<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/logo.jpg">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/logo.jpg">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/logo.jpg">
  <link rel="mask-icon" href="/images/logo.jpg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"luyanan.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="tomcat基础认知1. What is Tomcat1.1 Tomcat 官网官网: https:&#x2F;&#x2F;tomcat.apache.org  The Apache Tomcat® software is an open source implementation of the Java Servlet, JavaServer Pages, Java Expression Language and">
<meta property="og:type" content="article">
<meta property="og:title" content="1">
<meta property="og:url" content="http://luyanan.com/1.tomcat%E5%9F%BA%E7%A1%80%E8%AE%A4%E7%9F%A5/index.html">
<meta property="og:site_name" content="程序员报社">
<meta property="og:description" content="tomcat基础认知1. What is Tomcat1.1 Tomcat 官网官网: https:&#x2F;&#x2F;tomcat.apache.org  The Apache Tomcat® software is an open source implementation of the Java Servlet, JavaServer Pages, Java Expression Language and">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://files.luyanan.com//img/20200512085323.png">
<meta property="og:image" content="http://files.luyanan.com//img/20200512085331.png">
<meta property="og:image" content="http://files.luyanan.com//img/20200512090011.png">
<meta property="og:image" content="http://files.luyanan.com//img/20200512090444.png">
<meta property="og:image" content="http://files.luyanan.com//img/20200512093711.png">
<meta property="og:image" content="http://files.luyanan.com//img/20200512094153.png">
<meta property="og:image" content="http://files.luyanan.com//img/20200512101827.png">
<meta property="og:image" content="http://files.luyanan.com//img/20200512103741.png">
<meta property="article:published_time" content="2021-03-02T05:51:38.487Z">
<meta property="article:modified_time" content="2021-03-02T05:42:51.719Z">
<meta property="article:author" content="luyanan">
<meta property="article:tag" content="Python, Rust, C++, Go, 爬虫, 深度学习, 服务研发, 对象存储">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://files.luyanan.com//img/20200512085323.png">

<link rel="canonical" href="http://luyanan.com/1.tomcat%E5%9F%BA%E7%A1%80%E8%AE%A4%E7%9F%A5/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>1 | 程序员报社</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="程序员报社" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">程序员报社</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">程序员报社</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-sitemap">

    <a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>站点地图</a>

  </li>
        <li class="menu-item menu-item-commonweal">

    <a href="/404/" rel="section"><i class="fa fa-heartbeat fa-fw"></i>公益 404</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://luyanan.com/1.tomcat%E5%9F%BA%E7%A1%80%E8%AE%A4%E7%9F%A5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/logo.jpg">
      <meta itemprop="name" content="luyanan">
      <meta itemprop="description" content="程序员报社">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="程序员报社">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          1
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-03-02 13:51:38 / 修改时间：13:42:51" itemprop="dateCreated datePublished" datetime="2021-03-02T13:51:38+08:00">2021-03-02</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/tomcat/" itemprop="url" rel="index"><span itemprop="name">tomcat</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="tomcat基础认知"><a href="#tomcat基础认知" class="headerlink" title="tomcat基础认知"></a>tomcat基础认知</h1><h2 id="1-What-is-Tomcat"><a href="#1-What-is-Tomcat" class="headerlink" title="1. What is Tomcat"></a>1. What is Tomcat</h2><h3 id="1-1-Tomcat-官网"><a href="#1-1-Tomcat-官网" class="headerlink" title="1.1 Tomcat 官网"></a>1.1 <code>Tomcat</code> 官网</h3><p><code>官网</code>: <a target="_blank" rel="noopener" href="https://tomcat.apache.org/">https://tomcat.apache.org</a></p>
<blockquote>
<p>The Apache Tomcat® software is an open source implementation of the Java Servlet, JavaServer Pages, Java Expression Language and Java WebSocket technologies.</p>
</blockquote>
<h3 id="1-2-Understand"><a href="#1-2-Understand" class="headerlink" title="1.2 Understand"></a>1.2 Understand</h3><p>为什么<code>tomcat</code> 是<code>Servlet</code>技术的实现呢?<br> 在我们的理解中,<code>Tomcat</code>  可以被称为<code>web</code>容器或者<code>Servlet</code>容器<br>不妨手写一个<code>tomcat</code> 来推导一下</p>
<h4 id="1-2-1-创建Tomcat类"><a href="#1-2-1-创建Tomcat类" class="headerlink" title="1.2.1 创建Tomcat类"></a>1.2.1 创建<code>Tomcat</code>类</h4><p>java 是一门面对对象的语言</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//这就是我们写的Tomcat </span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyTomcat</span></span>&#123;</span><br><span class="line">  ....   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="1-2-2-web容器"><a href="#1-2-2-web容器" class="headerlink" title="1.2.2  web容器"></a>1.2.2  web容器</h4><p><code>思考</code>: 怎么让<code>TOmcat</code> 具备<code>web</code> 服务的功能? </p>
<p><img src="http://files.luyanan.com//img/20200512085323.png" alt="image-20200512085302976"></p>
<p><img src="http://files.luyanan.com//img/20200512085331.png" alt="image-20200512085329919"></p>
<p>在服务端用<code>Http</code> 来监听, 协议不好写，不妨用<code>java</code>封装好的<code>socket</code> 作为监听</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyTomcat</span></span>&#123;</span><br><span class="line">    ServerSocket server=<span class="keyword">new</span> ServerSocket(<span class="number">8080</span>);</span><br><span class="line">    <span class="comment">// 等待客户端的连接请求</span></span><br><span class="line">    Socket socket=server.accept();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="1-2-3-Servlet-容器"><a href="#1-2-3-Servlet-容器" class="headerlink" title="1.2.3 Servlet 容器"></a>1.2.3 <code>Servlet</code> 容器</h4><p><code>思考</code>: 怎么样让<code>Tomcat</code> 具有<code>Servlet</code> 容器的功能呢? 说白了就是能够装一个个的<code>Servlet</code></p>
<h5 id="servlet-是啥"><a href="#servlet-是啥" class="headerlink" title="servlet 是啥?"></a><code>servlet</code> 是啥?</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Servlet</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">(ServletConfig config)</span> <span class="keyword">throws</span> ServletException</span>;</span><br><span class="line">    <span class="function">ServletConfig <span class="title">getServletConfig</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">service</span><span class="params">(ServletRequest req, ServletResponse res）<span class="keyword">throws</span> ServletException,IOException;</span></span></span><br><span class="line"><span class="function"><span class="params">    String getServletInfo()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LoginServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span></span>&#123;</span><br><span class="line">    doGet(request,response)&#123;&#125;</span><br><span class="line">    doPost(request,response)&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>LoginServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.web.servlet.LoginServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>LoginServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/login<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="1-2-4-优化Tomcat"><a href="#1-2-4-优化Tomcat" class="headerlink" title="1.2.4 优化Tomcat"></a>1.2.4 优化<code>Tomcat</code></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyTomcat</span></span>&#123;</span><br><span class="line">    List list=<span class="keyword">new</span> ArrayList();</span><br><span class="line">    ServerSocket server=<span class="keyword">new</span> ServerSocket(<span class="number">8080</span>);</span><br><span class="line">    Socket socket=server.accept();</span><br><span class="line">    <span class="comment">// 把请求和响应都封装在业务代码中的servlet</span></span><br><span class="line">    <span class="comment">// 只要把业务代码中一个个servlets添加到tomcat中即可</span></span><br><span class="line">    list.add(servlets);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="1-2-5-画个图"><a href="#1-2-5-画个图" class="headerlink" title="1.2.5 画个图"></a>1.2.5 画个图</h4><p><img src="http://files.luyanan.com//img/20200512090011.png" alt="image-20200512090010840"></p>
<h4 id="1-2-6-获得的信息"><a href="#1-2-6-获得的信息" class="headerlink" title="1.2.6  获得的信息"></a>1.2.6  获得的信息</h4><ol>
<li><p><code>tomcat</code>需要支持<code>servlet</code> 规范</p>
<p> <code>tomcat/lib/servlet-api.jar</code></p>
</li>
<li><p>web容器</p>
<p>希望<code>tomcat</code> 源码中也有<code>new ServerSocket(8080)</code>  的代码</p>
</li>
<li><p><code>servlet</code> 容器</p>
<p> 希望<code>tomcat</code>源码中也会有<code>list.add(servlets)</code>的代码</p>
</li>
</ol>
<h2 id="2-产品和源码"><a href="#2-产品和源码" class="headerlink" title="2. 产品和源码"></a>2. 产品和源码</h2><h3 id="2-1-Version-Choose"><a href="#2-1-Version-Choose" class="headerlink" title="2.1 Version Choose"></a>2.1 <code>Version Choose</code></h3><p>这里选择的的<code>Tomcat8.0.11</code></p>
<p><code>各个版本下载地址</code>： <code>https://archive.apache.org/dist/tomcat</code></p>
<p><img src="http://files.luyanan.com//img/20200512090444.png" alt="image-20200512090443086"></p>
<h3 id="2-2-产品目录文件含义"><a href="#2-2-产品目录文件含义" class="headerlink" title="2.2 产品目录文件含义"></a>2.2 产品目录文件含义</h3><ul>
<li><code>bin</code>: 主要用来存放命令,<code>.bat</code>的<code>window</code>下的,<code>.sh</code>是<code>linux</code>下的</li>
<li><code>conf</code>:主要用来存放<code>tomcat</code>的配置文件</li>
<li><code>lib</code>: 存放<code>tomcat</code>依赖的一些<code>jar包</code></li>
<li><code>logs</code>:存放<code>tomcat</code> 在运行的时候产生的日志文件</li>
<li><code>temp</code>: 存放运行时产生的临时文件</li>
<li><code>webapps</code>: 存放应用程序</li>
<li><code>work</code>: 存放<code>tomcat</code>  运行时编译后的文件, 比如<code>jsp</code> 编译后的文件</li>
</ul>
<h3 id="2-3-源码导入与调试"><a href="#2-3-源码导入与调试" class="headerlink" title="2.3 源码导入与调试"></a>2.3 源码导入与调试</h3><p>先从官网下载源码包<code>https://archive.apache.org/dist/tomcat/tomcat-8/v8.0.11/src/apache-tomcat-8.0.11-src.zip</code></p>
<p>解压后,用idea 打开tomcat 源码</p>
<p>在源码目录下新建<code>pom.xml</code> 文件</p>
<p><img src="http://files.luyanan.com//img/20200512093711.png" alt="image-20200512093710241"></p>
<p><code>pom.xml</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0</span></span></span><br><span class="line"><span class="tag"><span class="string">http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.tomcat<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>Tomcat8.0<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>Tomcat8.0<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">finalName</span>&gt;</span>Tomcat8.0<span class="tag">&lt;/<span class="name">finalName</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">sourceDirectory</span>&gt;</span>java<span class="tag">&lt;/<span class="name">sourceDirectory</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">testSourceDirectory</span>&gt;</span>test<span class="tag">&lt;/<span class="name">testSourceDirectory</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">directory</span>&gt;</span>java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">testResources</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">testResource</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">directory</span>&gt;</span>test<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">testResource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">testResources</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">encoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">encoding</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.easymock<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>easymock<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>ant<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>ant<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>wsdl4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>wsdl4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.6.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.xml<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jaxrpc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.eclipse.jdt.core.compiler<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>ecj<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.5.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>然后右键<code>AS  a Maven Project</code> 即可. </p>
<h2 id="3-Tomcat-架构设计"><a href="#3-Tomcat-架构设计" class="headerlink" title="3. Tomcat 架构设计"></a>3. <code>Tomcat</code> 架构设计</h2><p><img src="http://files.luyanan.com//img/20200512094153.png" alt="image-20200512094150674"></p>
<h3 id="3-1-各个组件的定义"><a href="#3-1-各个组件的定义" class="headerlink" title="3.1 各个组件的定义"></a>3.1 各个组件的定义</h3><p><code>官网</code>：<a target="_blank" rel="noopener" href="https://tomcat.apache.org/tomcat-8.0-doc/architecture/overview.html">https://tomcat.apache.org/tomcat-8.0-doc/architecture/overview.html</a></p>
<h4 id="server"><a href="#server" class="headerlink" title="server"></a><code>server</code></h4><blockquote>
<p>In the Tomcat world, a Server represents the whole container. Tomcat provides a default implementation of the Server interface which is rarely customized by users.</p>
</blockquote>
<h4 id="Service"><a href="#Service" class="headerlink" title="Service"></a><code>Service</code></h4><blockquote>
<p>A Service is an intermediate component which lives inside a Server and ties one or more Connectors to exactly one Engine. The Service element is rarely customized by users, as the default implementation is simple and sufficient: Service<br>interface.Engine</p>
</blockquote>
<h4 id="Connector"><a href="#Connector" class="headerlink" title="Connector"></a><code>Connector</code></h4><blockquote>
<p>A Connector handles communications with the client. There are multiple connectors available with Tomcat. These include the HTTP connector which is used for most HTTP traffic, especially when running Tomcat as a standalone server, and the AJP connector which implements the AJP protocol used when connecting Tomcat to a web server such as Apache HTTPD server. Creating a customized connector is a significant effort.</p>
</blockquote>
<h4 id="Engine"><a href="#Engine" class="headerlink" title="Engine"></a><code>Engine</code></h4><blockquote>
<p>An Engine represents request processing pipeline for a specific Service. As a Service may have multiple Connectors, the Engine receives and processes all requests from these connectors, handing the response back to the appropriate connector for transmission to the client. The Engine interface may be implemented to supply custom Engines, though this is uncommon.<br>Note that the Engine may be used for Tomcat server clustering via the jvmRoute parameter. Read the Clustering documentation for more information.</p>
</blockquote>
<h4 id="Host"><a href="#Host" class="headerlink" title="Host"></a><code>Host</code></h4><blockquote>
<p>A Host is an association of a network name, e.g. <a target="_blank" rel="noopener" href="http://www.yourcompany.com/">www.yourcompany.com</a>, to the Tomcat server. An Engine may contain multiple hosts, and the Host element also supports network aliases such as yourcompany.com and abc.yourcompany.com. Users rarely create custom Hosts because the StandardHost implementation provides significant additional functionality.</p>
</blockquote>
<h4 id="Context"><a href="#Context" class="headerlink" title="Context"></a><code>Context</code></h4><blockquote>
<p>A Context represents a web application. A Host may contain multiple contexts, each with a unique path. The Context interface may be implemented to create custom Contexts, but this is rarely the case because the StandardContext provides significant additional functionality.</p>
</blockquote>
<h3 id="3-2-两个核心组件"><a href="#3-2-两个核心组件" class="headerlink" title="3.2  两个核心组件"></a>3.2  两个核心组件</h3><p><code>Connector</code>: 主要负责处理<code>Socket</code>连接,以及<code>Request</code>与<code>Response</code>的转化</p>
<p><code>Contailer</code>: 包括<code>Engine</code>、<code>Host</code>、<code>Context</code> 与<code>Wrapper</code>,主要负责内部的处理以及<code>Servlet</code> 的管理</p>
<h4 id="3-2-1-Connector"><a href="#3-2-1-Connector" class="headerlink" title="3.2.1 Connector"></a>3.2.1 <code>Connector</code></h4><p>思想: 高内聚、低耦合</p>
<p><code>EndPoint</code>:提供字节给<code>Processor</code></p>
<p><code>Processor</code>: 提供<code>Tomcat Request</code>对象给<code>Adapter</code></p>
<p><code>Adapter</code> : 提供<code>ServletRequest</code>给容器</p>
<p><img src="http://files.luyanan.com//img/20200512101827.png" alt="image-20200512101826771"></p>
<h5 id="3-1-1-1-EndPoint"><a href="#3-1-1-1-EndPoint" class="headerlink" title="3.1.1.1 EndPoint"></a>3.1.1.1 <code>EndPoint</code></h5><p>监听通讯端口, 是对传输层的抽象,用来实现<code>TCP/IP</code>协议的. </p>
<p>对应的的抽象类为<code>AbstractEndPoint</code>, 有很多的实现类, 比如<code>NioEndPoint</code>，<code>JIoEndPoint</code>等。在其中有两个组件，一个是<code>Acceptor</code>，另外一个是<code>SocketProcessor</code>。</p>
<p><code>Acceptor</code> 用于监听<code>Socket</code>连接请求,<code>SocketProcessor</code>用于处理接收到的<code>Socket</code> 请求. </p>
<h5 id="3-2-1-2-Processor"><a href="#3-2-1-2-Processor" class="headerlink" title="3.2.1.2 Processor"></a>3.2.1.2 <code>Processor</code></h5><p><code>Processor</code> 是用于实现http协议的,也就是说<code>Processor</code> 是针对应用层协议的抽象</p>
<p><code>Processor</code> 接受来自<code>EndPoint</code>的<code>Socket</code>,然后解析成<code>Tomcat Request</code>和<code>Tomcat Response</code>对象,最后通过<code>Adapter</code> 提交给容器</p>
<p>对应的抽象类为<code>AbstractProcessor</code>,有很多的实现类, 比如<code>AjpProcessor</code>、<code>Http11Processor</code>等。</p>
<h5 id="3-2-1-3-Adapter"><a href="#3-2-1-3-Adapter" class="headerlink" title="3.2.1.3  Adapter"></a>3.2.1.3  <code>Adapter</code></h5><p><code>ProcessHandler</code>接口负责解析请求并生成<code>Tomcat Request</code></p>
<p>需要把这个<code>Request</code>对象转换为<code>ServletRequest</code>. </p>
<p><code>Tomcat</code>优化<code>CoyoteAdapter</code>, 这是适配器模式的经典运用,连接器调用<code>CoyoteAdapter</code> 的<code>service</code> 方法,传入的是<code>Tomcat Request</code> 对象,<code>CoyoteAdapter</code> 负责将<code>Tomcat Request</code> 转化为<code>ServletRequest</code>, 再调用容器的<code>service</code> 方法,</p>
<h5 id="3-2-1-4-优化图解"><a href="#3-2-1-4-优化图解" class="headerlink" title="3.2.1.4 优化图解"></a>3.2.1.4 优化图解</h5><p><code>Endpoint</code>接收<code>Socket</code>连接，生成一个<code>SocketProcessor</code>任务提交到线程池去处理<code>SocketProcessor</code>的<code>run</code>方法会调用<code>Processor</code>组件去解析应用层协议，<code>Processor</code>通过解析生成Request对象后，会调用<code>Adapter</code>的<code>service</code>方法。</p>
<p><img src="http://files.luyanan.com//img/20200512103741.png" alt="image-20200512103740714"></p>
<h4 id="3-2-2-Contailer"><a href="#3-2-2-Contailer" class="headerlink" title="3.2.2 Contailer"></a>3.2.2 <code>Contailer</code></h4><p>通过<code>Connector</code>后, 我们已经能够获取到对应的<code>Servlet</code></p>
<h3 id="4-3-Request-Process-Flow"><a href="#4-3-Request-Process-Flow" class="headerlink" title="4.3 Request Process Flow"></a>4.3 <code>Request Process Flow</code></h3><p><code>官网</code>：<a target="_blank" rel="noopener" href="https://tomcat.apache.org/tomcat-8.0-doc/architecture/requestProcess/request-process.png">https://tomcat.apache.org/tomcat-8.0-doc/architecture/requestProcess/request-process.png</a></p>
<h2 id="5-思维扩展"><a href="#5-思维扩展" class="headerlink" title="5. 思维扩展"></a>5. 思维扩展</h2><h3 id="5-1-自定义类加载器"><a href="#5-1-自定义类加载器" class="headerlink" title="5.1 自定义类加载器"></a>5.1 自定义类加载器</h3><p><code>WebAppClassLoader</code>,打破了双亲委派模式,先自己尝试去加载这个类,找不到再委托给父类加载器,通过复写<code>findClass</code>和<code>loadClass</code> 实现. </p>
<h3 id="5-2-Session管理"><a href="#5-2-Session管理" class="headerlink" title="5.2 Session管理"></a>5.2 <code>Session</code>管理</h3><p><code>Context</code> 中的<code>Manage</code> 对象, 查看<code>Manage</code> 中的方法,可以发现有跟<code>Session</code>的方法. </p>
<p><code>Session</code> 的核心原理是通过<code>Filter</code>拦截<code>Servlet</code>请求, 将标准的<code>ServletRequest</code> 包装一下,换成<code>Spring</code>的<code>Request</code>对象,这样当我们调用<code>Request</code>对象的<code>getSession</code> 方法的时候,<code>Spring</code>在背后为我们创建和管理<code>Session</code></p>

    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BASpringBoot%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86/" rel="prev" title="深入浅出SpringBoot核心原理">
      <i class="fa fa-chevron-left"></i> 深入浅出SpringBoot核心原理
    </a></div>
      <div class="post-nav-item">
    <a href="/2.tomcat%E6%BA%90%E7%A0%81%E8%A7%A3%E8%AF%BB%E5%92%8C%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" rel="next" title="2">
      2 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#tomcat%E5%9F%BA%E7%A1%80%E8%AE%A4%E7%9F%A5"><span class="nav-number">1.</span> <span class="nav-text">tomcat基础认知</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-What-is-Tomcat"><span class="nav-number">1.1.</span> <span class="nav-text">1. What is Tomcat</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1-Tomcat-%E5%AE%98%E7%BD%91"><span class="nav-number">1.1.1.</span> <span class="nav-text">1.1 Tomcat 官网</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-Understand"><span class="nav-number">1.1.2.</span> <span class="nav-text">1.2 Understand</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-2-1-%E5%88%9B%E5%BB%BATomcat%E7%B1%BB"><span class="nav-number">1.1.2.1.</span> <span class="nav-text">1.2.1 创建Tomcat类</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-2-2-web%E5%AE%B9%E5%99%A8"><span class="nav-number">1.1.2.2.</span> <span class="nav-text">1.2.2  web容器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-2-3-Servlet-%E5%AE%B9%E5%99%A8"><span class="nav-number">1.1.2.3.</span> <span class="nav-text">1.2.3 Servlet 容器</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#servlet-%E6%98%AF%E5%95%A5"><span class="nav-number">1.1.2.3.1.</span> <span class="nav-text">servlet 是啥?</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-2-4-%E4%BC%98%E5%8C%96Tomcat"><span class="nav-number">1.1.2.4.</span> <span class="nav-text">1.2.4 优化Tomcat</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-2-5-%E7%94%BB%E4%B8%AA%E5%9B%BE"><span class="nav-number">1.1.2.5.</span> <span class="nav-text">1.2.5 画个图</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-2-6-%E8%8E%B7%E5%BE%97%E7%9A%84%E4%BF%A1%E6%81%AF"><span class="nav-number">1.1.2.6.</span> <span class="nav-text">1.2.6  获得的信息</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-%E4%BA%A7%E5%93%81%E5%92%8C%E6%BA%90%E7%A0%81"><span class="nav-number">1.2.</span> <span class="nav-text">2. 产品和源码</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-Version-Choose"><span class="nav-number">1.2.1.</span> <span class="nav-text">2.1 Version Choose</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-%E4%BA%A7%E5%93%81%E7%9B%AE%E5%BD%95%E6%96%87%E4%BB%B6%E5%90%AB%E4%B9%89"><span class="nav-number">1.2.2.</span> <span class="nav-text">2.2 产品目录文件含义</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-%E6%BA%90%E7%A0%81%E5%AF%BC%E5%85%A5%E4%B8%8E%E8%B0%83%E8%AF%95"><span class="nav-number">1.2.3.</span> <span class="nav-text">2.3 源码导入与调试</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-Tomcat-%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1"><span class="nav-number">1.3.</span> <span class="nav-text">3. Tomcat 架构设计</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-%E5%90%84%E4%B8%AA%E7%BB%84%E4%BB%B6%E7%9A%84%E5%AE%9A%E4%B9%89"><span class="nav-number">1.3.1.</span> <span class="nav-text">3.1 各个组件的定义</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#server"><span class="nav-number">1.3.1.1.</span> <span class="nav-text">server</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Service"><span class="nav-number">1.3.1.2.</span> <span class="nav-text">Service</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Connector"><span class="nav-number">1.3.1.3.</span> <span class="nav-text">Connector</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Engine"><span class="nav-number">1.3.1.4.</span> <span class="nav-text">Engine</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Host"><span class="nav-number">1.3.1.5.</span> <span class="nav-text">Host</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Context"><span class="nav-number">1.3.1.6.</span> <span class="nav-text">Context</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-%E4%B8%A4%E4%B8%AA%E6%A0%B8%E5%BF%83%E7%BB%84%E4%BB%B6"><span class="nav-number">1.3.2.</span> <span class="nav-text">3.2  两个核心组件</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#3-2-1-Connector"><span class="nav-number">1.3.2.1.</span> <span class="nav-text">3.2.1 Connector</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#3-1-1-1-EndPoint"><span class="nav-number">1.3.2.1.1.</span> <span class="nav-text">3.1.1.1 EndPoint</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-2-1-2-Processor"><span class="nav-number">1.3.2.1.2.</span> <span class="nav-text">3.2.1.2 Processor</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-2-1-3-Adapter"><span class="nav-number">1.3.2.1.3.</span> <span class="nav-text">3.2.1.3  Adapter</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-2-1-4-%E4%BC%98%E5%8C%96%E5%9B%BE%E8%A7%A3"><span class="nav-number">1.3.2.1.4.</span> <span class="nav-text">3.2.1.4 优化图解</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-2-2-Contailer"><span class="nav-number">1.3.2.2.</span> <span class="nav-text">3.2.2 Contailer</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-3-Request-Process-Flow"><span class="nav-number">1.3.3.</span> <span class="nav-text">4.3 Request Process Flow</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-%E6%80%9D%E7%BB%B4%E6%89%A9%E5%B1%95"><span class="nav-number">1.4.</span> <span class="nav-text">5. 思维扩展</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-1-%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8"><span class="nav-number">1.4.1.</span> <span class="nav-text">5.1 自定义类加载器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-2-Session%E7%AE%A1%E7%90%86"><span class="nav-number">1.4.2.</span> <span class="nav-text">5.2 Session管理</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="luyanan"
      src="/images/logo.jpg">
  <p class="site-author-name" itemprop="name">luyanan</p>
  <div class="site-description" itemprop="description">程序员报社</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">227</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">46</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/luyanan0718" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;luyanan0718" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="/luyanan0718@163.com" title="E-Mail → luyanan0718@163.com"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://luyanan.com/" title="https:&#x2F;&#x2F;luyanan.com">Site</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">luyanan</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"live2d-widget-model-haru"},"display":{"position":"right","width":150,"height":300},"mobile":null});</script></body>
</html>
